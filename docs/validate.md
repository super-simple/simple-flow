## 校验

校验的意义,在与流程还没有执行前,尽可能把所有的错误都找出来,保证流程执行的时候,能顺利运行

## 短板

由于流程没有执行,所以执行的都是静态检查,执行才能出来的错误,在这个阶段是无法发现的

## 校验原则

1. 先从简单的校验开始,再开始进行复杂的校验
2. 先校验是一个合格的图,然后再开始校验各种逻辑

## 校验管理器`SfDefaultValidateManager`

负责流程的所有校验的管理

### 基本校验`SfDefaultBasicValidator`

校验节点和图相关的地方,比如节点的配置是否正确,是否是一个图,没有孤立节点等等

1. 流程和子流程的id是否存在,不存在报错,同时校验流程和子流程的id,不能重复
2. 流程和子流程的的节点必须存在至少一个,且必须包含一个开始⌚事件,节点的id不能重复
3. 流程和子流程的边,如果存在,边本身的配置必须正确,并且配置的元素必须是合法的引用,不能是无效的引用,而且边的id不能重复,配置的内容本身也不能重复,节点的id也不能重复
4. 如果配置了`cleanOrphanNode`,那么还会清理掉孤立的节点和边,已经节点配置中,没有传递的参数

经过基本校验以后,可以确定配置是一个合格的图了

### 业务校验`SfDefaultBusinessValidator`

先基本校验,确保节点的配置正确,并且是一个合格的图,然后进行各种业务的校验,比如禁止子流程之间的循环引用